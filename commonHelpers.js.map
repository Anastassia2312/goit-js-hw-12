{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst form = document.querySelector('.img-information');\nconst searchInput = document.querySelector('.input-img-name');\nconst loadMoreBtn = document.querySelector('.fetch-more-button');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n});\nlet page = 1;\nlet perPage = 20;\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nconst scrollPage = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nloadMoreBtn.addEventListener('click', async () => {\n  const response = await axios.get(`https://pixabay.com/api/?${searchParams}`);\n  const data = response.data;\n  const totalHits = data.totalHits;\n  renderImages(hits);\n  scrollPage();\n  const totalPages = Math.ceil(totalHits / perPage);\n  if (page > totalPages) {\n    loadMoreBtn.style.display = 'none';\n    loadMoreBtn.textContent =\n      \"We're sorry, but you've reached the end of search results.\";\n  }\n});\n\nlet searchParamsObj = {\n  key: '41575459-699006cd61f4fecce9ea2d52d',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: page,\n  per_page: perPage,\n};\n\nasync function searchImages(params) {\n  searchParamsObj.q = params;\n  const searchParams = new URLSearchParams(searchParamsObj);\n  showLoader();\n  try {\n    searchParamsObj.page = 1;\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    page += 1;\n    if (page > 1) {\n      loadMoreBtn.classList.add('visible-btn');\n    }\n    hideLoader();\n\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nfunction renderImages(hits) {\n  const gallery = document.querySelector('.gallery');\n\n  const renderImages = hits.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n         <a class=\"image-link\" href=\"${image.largeImageURL}\">\n         <img class=\"images\" data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" src=\"${image.webformatURL}\" width=\"360\" height=\"200\">\n         </a>\n         <div class=\"information\">\n         <p>Likes: ${image.likes}</p>\n         <p>Views: ${image.views}</p>\n         <p>Comments: ${image.comments}</p>\n         <p>Downloads: ${image.downloads}</p>\n        </div>\n      </li>`,\n    ''\n  );\n  gallery.insertAdjacentHTML('beforeend', renderImages);\n  lightbox.refresh();\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  let { hits, totalHits } = await searchImages(searchInput.value);\n  renderImages(hits);\n});\n"],"names":["loader","form","searchInput","loadMoreBtn","lightbox","SimpleLightbox","page","perPage","axios","showLoader","hideLoader","scrollPage","galleryItemHeight","totalHits","renderImages","totalPages","searchParamsObj","searchImages","params","searchParams","response","error","iziToast","hits","gallery","html","image","event"],"mappings":"owBASA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAc,SAAS,cAAc,oBAAoB,EAEzDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,MAAO,EACT,CAAC,EACD,IAAIC,EAAO,EACPC,EAAU,GAEGC,EAAM,OAAO,CAC5B,QAAS,2BACT,QAAS,CACP,eAAgB,kBACjB,CACH,CAAC,EAED,SAASC,GAAa,CACpBT,EAAO,MAAM,QAAU,OACzB,CACA,SAASU,GAAa,CACpBV,EAAO,MAAM,QAAU,MACzB,CAEA,MAAMW,EAAa,IAAM,CAEvB,MAAMC,EADc,SAAS,cAAc,eAAe,EACpB,sBAAqB,EAAG,OAC9D,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAG,CACH,EAEAT,EAAY,iBAAiB,QAAS,SAAY,CAGhD,MAAMU,GAFW,MAAML,EAAM,IAAI,4BAA4B,cAAc,GACrD,KACC,UACvBM,EAAa,IAAI,EACjBH,IACA,MAAMI,EAAa,KAAK,KAAKF,EAAYN,CAAO,EAC5CD,EAAOS,IACTZ,EAAY,MAAM,QAAU,OAC5BA,EAAY,YACV,6DAEN,CAAC,EAED,IAAIa,EAAkB,CACpB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMV,EACN,SAAUC,CACZ,EAEA,eAAeU,EAAaC,EAAQ,CAClCF,EAAgB,EAAIE,EACpB,MAAMC,EAAe,IAAI,gBAAgBH,CAAe,EACxDP,IACA,GAAI,CACFO,EAAgB,KAAO,EACvB,MAAMI,EAAW,MAAMZ,EAAM,IAC3B,4BAA4BW,GAClC,EACI,OAAAb,GAAQ,EACJA,EAAO,GACTH,EAAY,UAAU,IAAI,aAAa,EAEzCO,IAEOU,EAAS,IACjB,OAAQC,EAAP,CACAC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASP,EAAaS,EAAM,CAC1B,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CV,EAAeS,EAAK,OACxB,CAACE,EAAMC,IACLD,EACA;AAAA,uCACiCC,EAAM;AAAA,4CACDA,EAAM,uBAAuBA,EAAM,cAAcA,EAAM;AAAA;AAAA;AAAA,qBAG9EA,EAAM;AAAA,qBACNA,EAAM;AAAA,wBACHA,EAAM;AAAA,yBACLA,EAAM;AAAA;AAAA,aAG3B,EACJ,EACEF,EAAQ,mBAAmB,YAAaV,CAAY,EACpDV,EAAS,QAAO,CAClB,CAEAH,EAAK,iBAAiB,SAAU,MAAM0B,GAAS,CAC7CA,EAAM,eAAc,EAEpB,GAAI,CAAE,KAAAJ,EAAM,UAAAV,CAAW,EAAG,MAAMI,EAAaf,EAAY,KAAK,EAC9DY,EAAaS,CAAI,CACnB,CAAC"}