{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst form = document.querySelector('.img-information');\nconst searchInput = document.querySelector('.input-img-name');\nconst loadMoreBtn = document.querySelector('.fetch-more-button');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n});\nlet page = 1;\nlet perPage = 40;\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n\nconst scrollPage = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nlet searchParamsObj = {\n  key: '41575459-699006cd61f4fecce9ea2d52d',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: page,\n  per_page: perPage,\n};\n\nconst searchParams = new URLSearchParams(searchParamsObj);\nasync function searchImages(params) {\n  searchParamsObj.q = params;\n\n  showLoader();\n  try {\n    searchParamsObj.page = 1;\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    page += 1;\n    if (page > 1) {\n      loadMoreBtn.classList.add('visible-btn');\n    }\n    hideLoader();\n\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nfunction renderImages(hits) {\n  const gallery = document.querySelector('.gallery');\n\n  const renderImages = hits.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n         <a class=\"image-link\" href=\"${image.largeImageURL}\">\n         <img class=\"images\" data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" src=\"${image.webformatURL}\" width=\"360\" height=\"200\">\n         </a>\n         <div class=\"information\">\n         <p>Likes: ${image.likes}</p>\n         <p>Views: ${image.views}</p>\n         <p>Comments: ${image.comments}</p>\n         <p>Downloads: ${image.downloads}</p>\n        </div>\n      </li>`,\n    ''\n  );\n  gallery.insertAdjacentHTML('beforeend', renderImages);\n  lightbox.refresh();\n}\n\nloadMoreBtn.addEventListener('click', async () => {\n  let { hits, totalHits } = await searchImages(q, page);\n  //renderImages(hits);\n  scrollPage();\n  const totalPages = Math.ceil(totalHits / perPage);\n});\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  page = 1;\n\n  const userValue = searchInput.value;\n  renderImages(hits);\n  if (page === totalPages) {\n    loadMoreBtn.style.display = 'none';\n    iziToast.error({\n      title: 'Message',\n      message: \"We're sorry, but you've reached the end of search results.\",\n      position: 'topRight',\n    });\n  }\n});\n"],"names":["loader","form","searchInput","loadMoreBtn","lightbox","SimpleLightbox","page","perPage","axios","showLoader","hideLoader","scrollPage","galleryItemHeight","searchParamsObj","searchParams","searchImages","params","response","error","iziToast","renderImages","hits","gallery","html","image","event"],"mappings":"owBASA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAc,SAAS,cAAc,iBAAiB,EACtDC,EAAc,SAAS,cAAc,oBAAoB,EAEzDC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,MAAO,EACT,CAAC,EACD,IAAIC,EAAO,EACPC,EAAU,GAEGC,EAAM,OAAO,CAC5B,QAAS,2BACT,QAAS,CACP,eAAgB,kBACjB,CACH,CAAC,EAED,SAASC,GAAa,CACpBT,EAAO,MAAM,QAAU,OACzB,CACA,SAASU,GAAa,CACpBV,EAAO,MAAM,QAAU,MACzB,CAEA,MAAMW,EAAa,IAAM,CAEvB,MAAMC,EADc,SAAS,cAAc,eAAe,EACpB,sBAAqB,EAAG,OAC9D,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAG,CACH,EAEA,IAAIC,EAAkB,CACpB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMP,EACN,SAAUC,CACZ,EAEA,MAAMO,EAAe,IAAI,gBAAgBD,CAAe,EACxD,eAAeE,EAAaC,EAAQ,CAClCH,EAAgB,EAAIG,EAEpBP,IACA,GAAI,CACFI,EAAgB,KAAO,EACvB,MAAMI,EAAW,MAAMT,EAAM,IAC3B,4BAA4BM,GAClC,EACI,OAAAR,GAAQ,EACJA,EAAO,GACTH,EAAY,UAAU,IAAI,aAAa,EAEzCO,IAEOO,EAAS,IACjB,OAAQC,EAAP,CACAC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASE,EAAaC,EAAM,CAC1B,MAAMC,EAAU,SAAS,cAAc,UAAU,EAE3CF,EAAeC,EAAK,OACxB,CAACE,EAAMC,IACLD,EACA;AAAA,uCACiCC,EAAM;AAAA,4CACDA,EAAM,uBAAuBA,EAAM,cAAcA,EAAM;AAAA;AAAA;AAAA,qBAG9EA,EAAM;AAAA,qBACNA,EAAM;AAAA,wBACHA,EAAM;AAAA,yBACLA,EAAM;AAAA;AAAA,aAG3B,EACJ,EACEF,EAAQ,mBAAmB,YAAaF,CAAY,EACpDhB,EAAS,QAAO,CAClB,CAEAD,EAAY,iBAAiB,QAAS,SAAY,CACtB,MAAMY,EAAa,CAAO,EAEpDJ,GAEF,CAAC,EAEDV,EAAK,iBAAiB,SAAU,MAAMwB,GAAS,CAC7CA,EAAM,eAAc,EAEpBnB,EAAO,EAEWJ,EAAY,MAC9BkB,EAAa,IAAI,EACbd,IAAS,aACXH,EAAY,MAAM,QAAU,OAC5BgB,EAAS,MAAM,CACb,MAAO,UACP,QAAS,6DACT,SAAU,UAChB,CAAK,EAEL,CAAC"}