{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst form = document.querySelector('.img-information');\nconst searchInput = document.querySelector('.input-img-name');\nconst loadMoreBtn = document.querySelector('.fetch-more-button');\n\nlet page = 1;\nlet perPage = 20;\n//const totalHits = response.data.totalHits;\n//const totalPages = Math.ceil(totalHits / perPage);\n\nconst instance = axios.create({\n  baseURL: 'https://pixabay.com/api/',\n  headers: {\n    'Content-Type': 'application/json',\n  },\n  page: page,\n  per_page: perPage,\n});\n\nfunction showLoader() {\n  loader.style.display = 'block';\n}\nfunction hideLoader() {\n  loader.style.display = 'none';\n}\n//loader.classList.add('hidden');\nloadMoreBtn.addEventListener('click', async () => {\n  let posts = await searchImages();\n  renderImages(hits);\n  if (response.totalHits === 0) {\n    loadMoreBtn.style.display = 'none';\n    loadMoreBtn.textContent =\n      \"We're sorry, but you've reached the end of search results.\";\n  }\n});\n\nlet searchParamsObj = {\n  key: '41575459-699006cd61f4fecce9ea2d52d',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n};\n\nasync function searchImages(params) {\n  searchParamsObj.q = params;\n  const searchParams = new URLSearchParams(searchParamsObj);\n  showLoader();\n  try {\n    const response = await axios.get(\n      `https://pixabay.com/api/?${searchParams}`\n    );\n    page += 1;\n    if (page > 1) {\n      loadMoreBtn.classList.add('visible-btn');\n    }\n    //console.log(response);\n    hideLoader();\n    return response.data;\n\n    //loader.classList.add('hidden');\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nfunction renderImages(hits) {\n  const gallery = document.querySelector('.gallery');\n  const lightbox = new SimpleLightbox('.gallery a', {\n    captionDelay: 250,\n    captionsData: 'alt',\n    close: true,\n  });\n  const renderImages = hits.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n         <a class=\"image-link\" href=\"${image.largeImageURL}\">\n         <img class=\"images\" data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" src=\"${image.webformatURL}\" width=\"360\" height=\"200\">\n         </a>\n         <div class=\"information\">\n         <p>Likes: ${image.likes}</p>\n         <p>Views: ${image.views}</p>\n         <p>Comments: ${image.comments}</p>\n         <p>Downloads: ${image.downloads}</p>\n        </div>\n      </li>`,\n    ''\n  );\n  gallery.innerHTML = renderImages;\n\n  lightbox.refresh();\n}\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n\n  await searchImages();\n  renderImages(hits);\n});\n"],"names":["loader","form","loadMoreBtn","page","perPage","axios","showLoader","hideLoader","searchImages","renderImages","searchParamsObj","params","searchParams","response","error","iziToast","hits","gallery","lightbox","SimpleLightbox","html","image","event"],"mappings":"owBASA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAO,SAAS,cAAc,kBAAkB,EAClC,SAAS,cAAc,iBAAiB,EAC5D,MAAMC,EAAc,SAAS,cAAc,oBAAoB,EAE/D,IAAIC,EAAO,EACPC,EAAU,GAIGC,EAAM,OAAO,CAC5B,QAAS,2BACT,QAAS,CACP,eAAgB,kBACjB,EACD,KAAMF,EACN,SAAUC,CACZ,CAAC,EAED,SAASE,GAAa,CACpBN,EAAO,MAAM,QAAU,OACzB,CACA,SAASO,GAAa,CACpBP,EAAO,MAAM,QAAU,MACzB,CAEAE,EAAY,iBAAiB,QAAS,SAAY,CACpC,MAAMM,EAAe,EACjCC,EAAa,IAAI,EACb,SAAS,YAAc,IACzBP,EAAY,MAAM,QAAU,OAC5BA,EAAY,YACV,6DAEN,CAAC,EAED,IAAIQ,EAAkB,CACpB,IAAK,qCACL,EAAG,GACH,WAAY,QACZ,YAAa,aACb,WAAY,EACd,EAEA,eAAeF,EAAaG,EAAQ,CAClCD,EAAgB,EAAIC,EACpB,MAAMC,EAAe,IAAI,gBAAgBF,CAAe,EACxDJ,IACA,GAAI,CACF,MAAMO,EAAW,MAAMR,EAAM,IAC3B,4BAA4BO,GAClC,EACI,OAAAT,GAAQ,EACJA,EAAO,GACTD,EAAY,UAAU,IAAI,aAAa,EAGzCK,IACOM,EAAS,IAGjB,OAAQC,EAAP,CACAC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,CAEA,SAASL,EAAaO,EAAM,CAC1B,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,MAAO,EACX,CAAG,EACKV,EAAeO,EAAK,OACxB,CAACI,EAAMC,IACLD,EACA;AAAA,uCACiCC,EAAM;AAAA,4CACDA,EAAM,uBAAuBA,EAAM,cAAcA,EAAM;AAAA;AAAA;AAAA,qBAG9EA,EAAM;AAAA,qBACNA,EAAM;AAAA,wBACHA,EAAM;AAAA,yBACLA,EAAM;AAAA;AAAA,aAG3B,EACJ,EACEJ,EAAQ,UAAYR,EAEpBS,EAAS,QAAO,CAClB,CAEAjB,EAAK,iBAAiB,SAAU,MAAMqB,GAAS,CAC7CA,EAAM,eAAc,EAEpB,MAAMd,EAAY,EAClBC,EAAa,IAAI,CACnB,CAAC"}