{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from 'izitoast';\n// Додатковий імпорт стилів\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\n// Додатковий імпорт стилів\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nconst loader = document.querySelector('.loader');\nconst loaderBottom = document.querySelector('.loader-before-button');\nconst form = document.querySelector('.img-information');\nconst searchInput = document.querySelector('.input-img-name');\nconst loadMoreBtn = document.querySelector('.fetch-more-button');\nconst gallery = document.querySelector('.gallery');\n\nconst lightbox = new SimpleLightbox('.gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n  close: true,\n});\nlet page = 1;\nlet query;\nlet perPage = 40;\n\n//loader.style.display = 'block';\n\n//loader.style.display = 'none';\n\nconst scrollPage = () => {\n  const galleryItem = document.querySelector('.gallery-item');\n  const galleryItemHeight = galleryItem.getBoundingClientRect().height;\n  window.scrollBy({\n    top: galleryItemHeight * 2,\n    behavior: 'smooth',\n  });\n};\n\nasync function searchImages(query, page) {\n  const BASE_URL = 'https://pixabay.com/api/';\n  const API_KEY = '41530032-c682b7302a1559a8b9f540776';\n\n  try {\n    const response = await axios.get(`${BASE_URL}`, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        page: page,\n        per_page: perPage,\n      },\n    });\n    return response.data;\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  }\n}\n\nloadMoreBtn.addEventListener('click', async event => {\n  loaderBottom.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\n  try {\n    page += 1;\n\n    const { hits, totalHits } = await searchImages(query, page);\n    const totalPage = Math.ceil(totalHits / perPage);\n\n    loadMoreBtn.style.display = 'block';\n    renderImages(hits);\n    scrollPage();\n\n    if (page === totalPage) {\n      loadMoreBtn.style.display = 'none';\n      return iziToast.info({\n        position: 'topRight',\n        message: `We're sorry, but you've reached the end of search results.`,\n      });\n    }\n  } catch (error) {\n    console.log(error);\n  } finally {\n    loaderBottom.style.display = 'none';\n  }\n});\n\nform.addEventListener('submit', async event => {\n  event.preventDefault();\n  loader.style.display = 'block';\n  loadMoreBtn.style.display = 'none';\n  page = 1;\n  query = event.target.elements.search.value.trim();\n\n  if (query === '') {\n    loadMoreBtn.style.display = 'none';\n    return;\n  }\n\n  try {\n    const { hits, totalHits } = await searchImages(query, page);\n\n    if (hits.length > 0) {\n      loader.style.display = 'none';\n      renderImages(hits);\n      loadMoreBtn.style.display = 'block';\n    } else {\n      gallery.innerHTML = '';\n      iziToast.error({\n        position: 'topRight',\n        message:\n          'Sorry, there are no images matching your search query. Please try again!',\n      });\n    }\n\n    if (totalHits <= perPage) {\n      loadMoreBtn.style.display = 'none';\n    }\n  } catch (error) {\n    console.log(error.message);\n  } finally {\n    loader.style.display = 'none';\n    event.target.reset();\n  }\n});\n\nfunction renderImages(hits = []) {\n  const renderImages = hits.reduce(\n    (html, image) =>\n      html +\n      `<li class=\"gallery-item\">\n         <a class=\"image-link\" href=\"${image.largeImageURL}\">\n         <img class=\"images\" data-source=\"${image.largeImageURL}\" alt=\"${image.tags}\" src=\"${image.webformatURL}\" width=\"360\" height=\"200\">\n         </a>\n         <div class=\"information\">\n         <p>Likes: ${image.likes}</p>\n         <p>Views: ${image.views}</p>\n         <p>Comments: ${image.comments}</p>\n         <p>Downloads: ${image.downloads}</p>\n        </div>\n      </li>`,\n    ''\n  );\n  gallery.insertAdjacentHTML('beforeend', renderImages);\n  lightbox.refresh();\n}\n"],"names":["loader","loaderBottom","form","loadMoreBtn","gallery","lightbox","SimpleLightbox","page","query","perPage","scrollPage","galleryItemHeight","searchImages","BASE_URL","API_KEY","axios","error","iziToast","event","hits","totalHits","totalPage","renderImages","html","image"],"mappings":"owBAQA,MAAMA,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAe,SAAS,cAAc,uBAAuB,EAC7DC,EAAO,SAAS,cAAc,kBAAkB,EAClC,SAAS,cAAc,iBAAiB,EAC5D,MAAMC,EAAc,SAAS,cAAc,oBAAoB,EACzDC,EAAU,SAAS,cAAc,UAAU,EAE3CC,EAAW,IAAIC,EAAe,aAAc,CAChD,aAAc,IACd,aAAc,MACd,MAAO,EACT,CAAC,EACD,IAAIC,EAAO,EACPC,EACAC,EAAU,GAMd,MAAMC,EAAa,IAAM,CAEvB,MAAMC,EADc,SAAS,cAAc,eAAe,EACpB,sBAAqB,EAAG,OAC9D,OAAO,SAAS,CACd,IAAKA,EAAoB,EACzB,SAAU,QACd,CAAG,CACH,EAEA,eAAeC,EAAaJ,EAAOD,EAAM,CACvC,MAAMM,EAAW,2BACXC,EAAU,qCAEhB,GAAI,CAYF,OAXiB,MAAMC,EAAM,IAAI,GAAGF,IAAY,CAC9C,OAAQ,CACN,IAAKC,EACL,EAAGN,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,KAAMD,EACN,SAAUE,CACX,CACP,CAAK,GACe,IACjB,OAAQO,EAAP,CACAC,EAAS,MAAM,CACb,MAAO,QACP,QAASD,EAAM,QACf,SAAU,UAChB,CAAK,CACF,CACH,CAEAb,EAAY,iBAAiB,QAAS,MAAMe,GAAS,CACnDjB,EAAa,MAAM,QAAU,QAC7BE,EAAY,MAAM,QAAU,OAC5B,GAAI,CACFI,GAAQ,EAER,KAAM,CAAE,KAAAY,EAAM,UAAAC,CAAW,EAAG,MAAMR,EAAaJ,EAAOD,CAAI,EACpDc,EAAY,KAAK,KAAKD,EAAYX,CAAO,EAM/C,GAJAN,EAAY,MAAM,QAAU,QAC5BmB,EAAaH,CAAI,EACjBT,IAEIH,IAASc,EACX,OAAAlB,EAAY,MAAM,QAAU,OACrBc,EAAS,KAAK,CACnB,SAAU,WACV,QAAS,4DACjB,CAAO,CAEJ,OAAQD,EAAP,CACA,QAAQ,IAAIA,CAAK,CACrB,QAAY,CACRf,EAAa,MAAM,QAAU,MAC9B,CACH,CAAC,EAEDC,EAAK,iBAAiB,SAAU,MAAMgB,GAAS,CAO7C,GANAA,EAAM,eAAc,EACpBlB,EAAO,MAAM,QAAU,QACvBG,EAAY,MAAM,QAAU,OAC5BI,EAAO,EACPC,EAAQU,EAAM,OAAO,SAAS,OAAO,MAAM,OAEvCV,IAAU,GAAI,CAChBL,EAAY,MAAM,QAAU,OAC5B,MACD,CAED,GAAI,CACF,KAAM,CAAE,KAAAgB,EAAM,UAAAC,CAAW,EAAG,MAAMR,EAAaJ,EAAOD,CAAI,EAEtDY,EAAK,OAAS,GAChBnB,EAAO,MAAM,QAAU,OACvBsB,EAAaH,CAAI,EACjBhB,EAAY,MAAM,QAAU,UAE5BC,EAAQ,UAAY,GACpBa,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACV,CAAO,GAGCG,GAAaX,IACfN,EAAY,MAAM,QAAU,OAE/B,OAAQa,EAAP,CACA,QAAQ,IAAIA,EAAM,OAAO,CAC7B,QAAY,CACRhB,EAAO,MAAM,QAAU,OACvBkB,EAAM,OAAO,OACd,CACH,CAAC,EAED,SAASI,EAAaH,EAAO,GAAI,CAC/B,MAAMG,EAAeH,EAAK,OACxB,CAACI,EAAMC,IACLD,EACA;AAAA,uCACiCC,EAAM;AAAA,4CACDA,EAAM,uBAAuBA,EAAM,cAAcA,EAAM;AAAA;AAAA;AAAA,qBAG9EA,EAAM;AAAA,qBACNA,EAAM;AAAA,wBACHA,EAAM;AAAA,yBACLA,EAAM;AAAA;AAAA,aAG3B,EACJ,EACEpB,EAAQ,mBAAmB,YAAakB,CAAY,EACpDjB,EAAS,QAAO,CAClB"}